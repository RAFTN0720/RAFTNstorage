(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(e){if(e.ep)return;e.ep=!0;const a=t(e);fetch(e.href,a)}})();let p="vfx",r=null;function I(){const l=document.querySelectorAll(".tab-btn");l.forEach(o=>{o.addEventListener("click",()=>{var n;l.forEach(e=>e.classList.remove("active")),o.classList.add("active"),document.querySelectorAll(".gallery").forEach(e=>e.classList.remove("active")),p=o.getAttribute("data-tab")||"vfx",(n=document.getElementById(`${p}-gallery`))==null||n.classList.add("active")})})}function b(){p==="video"?B():document.getElementById("fileInput").click()}function B(){const l=document.getElementById("uploadModal"),o=document.getElementById("uploadModalTitle"),t=document.getElementById("videoInputs"),n=document.getElementById("imageNameInput");o.textContent="영상 추가",t.style.display="block",n.placeholder="영상 제목을 입력하세요",l.style.display="flex"}function C(l){const o=l.files;if(!(o!=null&&o.length))return;const t=document.getElementById("uploadModal"),n=document.getElementById("uploadModalTitle"),e=document.getElementById("videoInputs"),a=document.getElementById("imageNameInput");p==="video"?(n.textContent="영상 추가",e.style.display="block",a.placeholder="영상 제목을 입력하세요"):(n.textContent="이미지 업로드",e.style.display="none",a.placeholder="이미지 이름을 입력하세요",r=o[0]),t.style.display="flex"}function f(l){if(!r)return;if(p==="video"){const t=URL.createObjectURL(r);L(t,l)}else{const t=new FileReader;t.onload=function(n){var e;E((e=n.target)==null?void 0:e.result,l)},t.readAsDataURL(r)}r=null;const o=document.getElementById("fileInput");o.value=""}function L(l,o){const t=document.createElement("video");t.src=l,t.onloadeddata=()=>{t.currentTime=1},t.onseeked=()=>{const n=document.createElement("canvas");n.width=t.videoWidth,n.height=t.videoHeight;const e=n.getContext("2d");e==null||e.drawImage(t,0,0,n.width,n.height);const a=n.toDataURL("image/jpeg");g({url:l,thumbnailUrl:a,title:o})}}function E(l,o,t){const n=document.getElementById(`${t||p}-gallery`),e=document.createElement("div");e.className="image-frame";const a=document.createElement("img");a.src=l,a.onclick=()=>M(l,o);const i=document.createElement("div");i.className="image-name",i.textContent=o;const d=document.createElement("div");d.className="edit-name";const c=document.createElement("input");c.type="text",c.value=o,d.style.display="none";const u=document.createElement("button");u.className="edit-btn",u.innerHTML="✎",u.onclick=y=>{y.stopPropagation(),d.style.display="block",c.focus()},i.ondblclick=y=>{y.stopPropagation(),d.style.display="block",c.focus()},c.onblur=()=>{i.textContent=c.value,d.style.display="none",m()},c.onkeypress=y=>{y.key==="Enter"&&(i.textContent=c.value,d.style.display="none",m())};const s=document.createElement("button");s.className="delete-btn",s.innerHTML="×",s.onclick=y=>{y.stopPropagation(),n.removeChild(e),m()},d.appendChild(c),e.appendChild(a),e.appendChild(i),e.appendChild(d),e.appendChild(u),e.appendChild(s),n.appendChild(e),m()}function g(l){const o=document.getElementById("video-gallery"),t=document.createElement("div");t.className="video-frame";const n=document.createElement("div");n.innerHTML=`
    <div class="video-thumbnail">
      <img src="${l.thumbnailUrl}" alt="${l.title}">
      <div class="play-overlay">
        <i>▶</i>
      </div>
    </div>
    <div class="video-info">
      <div class="video-title">${l.title}</div>
    </div>
  `;const e=n.querySelector(".video-thumbnail");e.onclick=()=>window.open(l.url,"_blank");const a=n.querySelector(".video-title"),i=document.createElement("div");i.className="edit-name";const d=document.createElement("input");d.type="text",d.value=l.title,i.style.display="none";const c=document.createElement("button");c.className="edit-btn",c.innerHTML="✎",c.onclick=s=>{s.stopPropagation(),i.style.display="block",d.focus()},a.ondblclick=s=>{s.stopPropagation(),i.style.display="block",d.focus()},d.onblur=()=>{a.textContent=d.value,i.style.display="none",m()},d.onkeypress=s=>{s.key==="Enter"&&(a.textContent=d.value,i.style.display="none",m())};const u=document.createElement("button");u.className="delete-btn",u.innerHTML="×",u.onclick=s=>{s.stopPropagation(),o.removeChild(t),m()},i.appendChild(d),t.appendChild(n),t.appendChild(i),t.appendChild(c),t.appendChild(u),t.setAttribute("data-url",l.url),o.appendChild(t),m()}function M(l,o){const t=document.getElementById("imageModal"),n=document.getElementById("modalImage"),e=document.getElementById("modalImageName");t.style.display="flex",n.src=l,e.textContent=o,n.classList.remove("zoomed");let a=1,i=!1;setTimeout(()=>{t.classList.add("show")},10),n.onclick=d=>{d.stopPropagation(),n.classList.toggle("zoomed"),i=!i},t.onclick=()=>{n.classList.remove("zoomed"),k()},n.onwheel=d=>{if(d.preventDefault(),!i)return;const c=d.deltaY>0?-.1:.1;a=Math.min(Math.max(a+c,.5),3),n.style.transform=`scale(${a})`}}function k(){const l=document.getElementById("imageModal"),o=document.getElementById("modalImage");l.classList.remove("show"),o.classList.remove("zoomed"),o.style.transform="",setTimeout(()=>{l.style.display="none"},300)}function m(){const l={vfx:v("vfx"),model:v("model"),ui:v("ui"),video:x()};localStorage.setItem("galleryData",JSON.stringify(l))}function v(l){const o=document.getElementById(`${l}-gallery`),t=[];return o==null||o.querySelectorAll(".image-frame").forEach(n=>{const e=n.querySelector("img"),a=n.querySelector(".image-name");e&&a&&t.push({url:e.src,name:a.textContent||""})}),t}function x(){const l=document.getElementById("video-gallery"),o=[];return l==null||l.querySelectorAll(".video-frame").forEach(t=>{const n=t.querySelector(".video-thumbnail img"),e=t.querySelector(".video-title");n&&e&&o.push({url:t.getAttribute("data-url")||"",thumbnailUrl:n.src,title:e.textContent||""})}),o}function N(){const l=localStorage.getItem("galleryData");if(l){const o=JSON.parse(l);["vfx","model","ui"].forEach(n=>{o[n].forEach(a=>{E(a.url,a.name,n)})}),o.video.forEach(n=>{g(n)})}}document.addEventListener("DOMContentLoaded",()=>{I(),N();const l=document.getElementById("fileInput"),o=document.getElementById("uploadBtn"),t=document.getElementById("confirmUpload"),n=document.getElementById("cancelUpload"),e=document.getElementById("imageNameInput");o==null||o.addEventListener("click",b),l==null||l.addEventListener("change",a=>{C(a.target)}),t==null||t.addEventListener("click",()=>{const a=document.getElementById("videoUrlInput"),i=document.getElementById("thumbnailUrlInput"),d=document.getElementById("uploadModal");if(p==="video"){const c={url:a.value,thumbnailUrl:i.value||`https://img.youtube.com/vi/${h(a.value)}/maxresdefault.jpg`,title:e.value};g(c),a.value="",i.value=""}else r&&f(e.value);e.value="",d.style.display="none"}),n==null||n.addEventListener("click",()=>{const a=document.getElementById("uploadModal");r=null,e.value="",a.style.display="none"}),e.addEventListener("keypress",a=>{if(a.key==="Enter"){const i=document.getElementById("uploadModal"),d=document.getElementById("videoUrlInput"),c=document.getElementById("thumbnailUrlInput");if(p==="video"){const u={url:d.value,thumbnailUrl:c.value||`https://img.youtube.com/vi/${h(d.value)}/maxresdefault.jpg`,title:e.value};g(u),d.value="",c.value=""}else r&&f(e.value);e.value="",i.style.display="none"}})});function h(l){const o=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,t=l.match(o);return t&&t[2].length===11?t[2]:null}
